from web3 import Web3
import json
import sys

with open('config.json', 'r') as f:
    config = json.loads(f.read())

network = sys.argv[1] if len(sys.argv) > 1 else 'mainnet'
w3 = Web3(Web3.HTTPProvider(f'https://{network}.infura.io/v3/{config["infura_project_id"]}'))

with open('opensea_contract.json', 'r') as f:
    opensea_contract_info = json.loads(f.read())

opensea_contract = w3.eth.contract(address=opensea_contract_info['addr'], abi=opensea_contract_info['abi'])

args = [
    [
        '0x7Be8076f4EA4A4AD08075C2508e481d6C946D12b',
        '0xfF44414EB815C0B8b4c380CAae3eD6d342310dcc',
        '0x1cDe700C8b4012079157CFB0d12DF7FD41F3d581',
        '0x0000000000000000000000000000000000000000',
        '0xc36cF0cFcb5d905B8B513860dB0CFE63F6Cf9F5c',
        '0x0000000000000000000000000000000000000000',
        '0x0000000000000000000000000000000000000000',
        '0x7Be8076f4EA4A4AD08075C2508e481d6C946D12b',
        '0x1cDe700C8b4012079157CFB0d12DF7FD41F3d581',
        '0x0000000000000000000000000000000000000000',
        '0x5b3256965e7C3cF26E11FCAf296DfC8807C01073',
        '0xc36cF0cFcb5d905B8B513860dB0CFE63F6Cf9F5c',
        '0x0000000000000000000000000000000000000000',
        '0x0000000000000000000000000000000000000000',
    ],
    [
        500,
        0,
        0,
        0,
        330000000000000000,
        0,
        1640976184,
        0,
        59713523644746138926667942240831772979361625174918530302104536833844222859082,
        500,
        0,
        0,
        0,
        330000000000000000,
        0,
        1640842990,
        1656564280,
        61341184947714141137345094686863460456114892323983630456956217783695526958439,
    ],
    [
        1,
        0,
        0,
        0,
        1,
        1,
        0,
        0,
    ],
    w3.toBytes(0xf242432a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff44414eb815c0b8b4c380caae3ed6d342310dcc0000000000000000000000000000019a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000),
    w3.toBytes(0xf242432a0000000000000000000000001cde700c8b4012079157cfb0d12df7fd41f3d58100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000019a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000),
    w3.toBytes(0x00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),
    w3.toBytes(0x000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),
    w3.toBytes(0x0),
    w3.toBytes(0x0),
    [27, 27],
    [
        w3.toBytes(0x483c58bc6ea1956a6f4d076a885ccb2e66402b054e3e495e23d38cbc4d85481c),
        w3.toBytes(0x1ff7cedd05b98316563b2a3ed7817baaa435fc5642a3018345f9875689cb1d23),
        w3.toBytes(0x483c58bc6ea1956a6f4d076a885ccb2e66402b054e3e495e23d38cbc4d85481c),
        w3.toBytes(0x1ff7cedd05b98316563b2a3ed7817baaa435fc5642a3018345f9875689cb1d23),
        w3.toBytes(0x0000000000000000000000000000000000000000000000000000000000000000),
    ]
]

gas = opensea_contract.functions.atomicMatch_(*args).estimateGas({'gas': w3.toHex(30000)})
print(gas)